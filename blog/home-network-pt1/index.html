<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=https://meyerweb.com/eric/tools/css/reset/reset.css rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=Baloo+Paaji+2:wght@500&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=Muli&display=swap" rel=stylesheet> <link href=github-markdown.css rel=stylesheet> <link href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/zenburn.min.css rel=stylesheet> <script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js></script> <script src=//gc.zgo.at/count.js async data-goatcounter=https://ldelossa.goatcounter.com/count></script> <style>.layout.svelte-lybuj1{display:grid;height:100vh;width:100vw;grid-template-columns:1.5fr 6fr}.content-wrapper.svelte-lybuj1{grid-area:1/2/2/3;overflow-y:auto}.content-wrapper-full.svelte-lybuj1{grid-area:1/1/2/3}@media screen and (max-width:600px){.layout.svelte-lybuj1{display:grid;grid-template-columns:1fr}.content-wrapper.svelte-lybuj1{z-index:1}.content-wrapper-full.svelte-lybuj1{z-index:1}}.sidebar-open.svelte-posnvr{display:flex;justify-content:space-between;flex-direction:column;height:100vh;max-width:300px;min-width:275px;margin-right:1vmin;background:#4b6777;overflow-y:hidden}.sidebar-closed.svelte-posnvr{display:none}.sb-toggle-button-open.svelte-posnvr{z-index:100;outline:0;background-color:Transparent;border:none;padding:10px 12px;font-size:30px;cursor:pointer;color:#f3f8f2;font-family:Muli,cursive;position:fixed;left:0}.sb-toggle-button-open.svelte-posnvr:hover{color:#f2511b}.sb-toggle-button-closed.svelte-posnvr{z-index:100;outline:0;background-color:Transparent;border:none;padding:10px 12px;font-size:30px;cursor:pointer;color:#4b6777;font-family:Muli,cursive;position:fixed;left:0}.sb-toggle-button-closed.svelte-posnvr:hover{color:#f2511b}.author-wrapper.svelte-posnvr{display:flex;flex-direction:column;justify-content:center;margin:40px}.author.svelte-posnvr{text-align:center;font-size:2rem;color:#f3f8f2;font-family:Muli,sans-serif;letter-spacing:1px;text-shadow:2px 2px 0 rgba(0,0,0,.35),2px 2px 5px rgba(0,0,0,.5)}.console-wrapper.svelte-posnvr{display:flex;margin:20px;justify-content:center}nav.svelte-posnvr{display:flex;flex-direction:column;justify-content:space-around;flex-wrap:wrap}.icons-wrapper.svelte-posnvr{display:flex;flex-direction:column;justify-content:flex-end;padding:20px}@media screen and (max-width:600px){.sidebar-open.svelte-posnvr{-moz-box-shadow:initial;-webkit-box-shadow:initial;box-shadow:initial;max-width:initial;min-width:initial;margin-right:initial;border-right:initial;height:100vh;width:100vw}.icons-wrapper.svelte-posnvr{display:flex;grid-area:icons;flex-direction:column;justify-content:space-between}}pre.svelte-wc9ma6 code.svelte-wc9ma6{border-radius:3%;padding:8px;display:block;min-width:230px;max-width:275px;background:#333;color:#737373}.button-wrapper.svelte-n868dk{text-align:center;margin:1rem 0 1rem 0;padding:1rem 1rem 1rem 1rem}.button-ref.svelte-n868dk{text-decoration:underline;font-size:30px;color:#e9f1f7;font-family:Muli,sans-serif;letter-spacing:1px;text-shadow:2px 2px 0 rgba(0,0,0,.35),2px 2px 5px rgba(0,0,0,.5)}.button-ref.svelte-n868dk:hover{color:#f2511b;text-shadow:-1px -1px 0 rgba(242,81,27,.5),-1px -1px -5px rgba(242,81,27,.5)}.icons.svelte-13lfieo{display:flex;flex-direction:row;justify-content:space-around;flex-wrap:wrap}img.svelte-13lfieo{width:30px;height:30px}img.svelte-13lfieo:hover{-webkit-filter:drop-shadow(2px 2px 2px #222);filter:drop-shadow(2px 2px 2px #222)}.blog-wrapper.svelte-1ih628r{max-height:100vh;max-width:100vw}.markdown-body.svelte-1ih628r{min-width:100px;max-width:900px;margin:0 auto;padding:45px;color:#e9f1f7;font-family:Muli,sans-serif}@media(max-width:767px){.markdown-body.svelte-1ih628r{max-width:75%}}</style> <noscript id=sapper-head-start></noscript><title>Building A Home Lab With Podman - Pt1</title><noscript id=sapper-head-end></noscript> <link href=/client/21d5f7fc0374dd879b15/main.js rel=preload as=script><link href=/client/21d5f7fc0374dd879b15/blog_$slug.2.js rel=preload as=script></head> <body> <div id=sapper> <div class="svelte-lybuj1 layout"><button class="svelte-posnvr sb-toggle-button-closed">☰</button> <div class="svelte-posnvr sidebar-closed"><div class="svelte-posnvr author-wrapper"><p class="svelte-posnvr author">Louis DeLosSantos<p><div class="svelte-posnvr console-wrapper"><pre class=svelte-wc9ma6><code class=svelte-wc9ma6>❯ tree ./ldelossa 
├── hardware
├── linux
├── music
└── software
❯ <span id=cursor>▊</span></code></pre></div></div> <nav class=svelte-posnvr><div class="svelte-n868dk button-wrapper"><a href=about class="svelte-n868dk button-ref">about</a></div> <div class="svelte-n868dk button-wrapper"><a href=resume class="svelte-n868dk button-ref">resume</a></div> <div class="svelte-n868dk button-wrapper"><a href=projects class="svelte-n868dk button-ref">projects</a></div> <div class="svelte-n868dk button-wrapper"><a href=blog class="svelte-n868dk button-ref">blog</a></div></nav> <div class="svelte-posnvr icons-wrapper"><div class="svelte-13lfieo icons"><a href=https://www.linkedin.com/in/louisdelossantos/ target=_blank><img alt="linkedin icon" class=svelte-13lfieo src=linkedin.svg></a> <a href=https://github.com/ldelossa target=_blank><img alt="github icon" class=svelte-13lfieo src=github.svg></a> <a href=https://twitter.com/ldelossa_ld target=_blank><img alt="twitter icon" class=svelte-13lfieo src=twitter.svg></a></div></div></div> <div class="svelte-lybuj1 content-wrapper-full"> <div class="svelte-1ih628r blog-wrapper"><article class="svelte-1ih628r markdown-body"><h1>Building A Home Lab With Podman - Pt1</h1> <p><em>Checkout <a href=/blog/home-network-pt2>Part 2</a> For Application Routing</em></p> <p>It's common to set up a network, a few virtual hosts, and fundamental network services at home as a way to learn how these technologies interact.</p> <p>While moving apartments in Brooklyn I discovered a Thinkpad laptop just collecting dust. The laptop had good specs and a 1TB ssd. I wanted to put this bad boy to use.</p> <p>Soon the idea of creating a modern lab based on containers, free of noisy and expensive equipment, took hold.</p> <p>This post introduces network topology, components which make up the network, and how name resolution is achieved.</p> <h2>The Stack</h2> <ul> <li>Podman - a daemonless container runtime that works well with SystemD</li> <li>CoreDNS - a DNS server that uses a ton of plugins to implement name resolution.</li> <li>NetData - a C monitoring daemon which scrapes /proc for every metric you can think of.</li> <li>Traefik - a service routing solution which supports path routing, redirects, and load balancing.</li> <li>Fedora32 - good ol' fedora linux as a host operating system (shameless plug).</li> </ul> <p>Above is the software stack used in the lab.</p> <h2>The Network</h2> <p>A typical home network consists of a modem, a router with a built in switch and WiFi, and devices which connect to a local LAN. This lab will introduce an additional host for creating and exposing containers.</p> <pre class=hljs><code>+----------+  +--------+
|  Laptop  |  | Iphone |
+-----+----+  +---+----+
      |           |
      |           |
      |           |
      |           |
+-----+-----------+----+                    +------------------------------+
|                      |                    |                              |
| LAN 192.168.185.0/24 |                    |  CONTAINER-LAN 10.89.0.0/24  |
|                      |                    |                              |
+---------+------------+                    +-------+----------------------+
          |                                         |
          |                                         |
          | port forward +-----------+              |
          +--------------+ CONTAINER +--------------+
          |              +-----^-----+              |
          |                    | podman run         |
          |              +-----+-----+              |
          |              |           |              |
          +--------------+  CT-HOST  +--------------+
                         |           |
                         +-----------+
</code></pre> <p>The network will look like this.</p> <p>CT-HOST is a Fedora32 laptop running Podman and will manage container lifecycles. The host resides on two networks: LAN (192.168.185.0/24) where devices communicate and CONTAINER-LAN (10.89.0.0/24) where containers communicate. The CONTAINER-LAN is virtual and created by the linux kernel.</p> <p>Containers may be exposed on "ct-host" to devices on LAN by port-forwarding the container's port onto the hosts. Not every container needs to have their ports forwarded but to achieve name resolution this is required.</p> <h2>Name Resolution</h2> <p>Name resolution provides mapping from a hostname to a service. This is encountered every time "www.google.com" is typed into a browser. The name "www.google.com" is resolved to an IP address where web servers provide this service. This lab creates the <code>ldelossa.net</code> local domain.</p> <p>Personally, I don't want to write RFC 1035 zone files, host ancient bind servers, or deal with cryptic configs. There is a certain beauty in the syntax of a hosts file. A simple text file which maps a hostname to an IP address suits my needs well. The answer was found in <a href=https://coredns.io/ >CoreDNS</a> and its <a href=https://coredns.io/plugins/hosts/ >hosts</a> plugin.</p> <p>On top of a terse syntax the "hosts" plugin provides dynamic reloading. Changes to the file holding your hostname mappings will reload the server, the changes taking effect soon after.</p> <h3>Podman</h3> <p>Podman is the container runtime used in this lab.</p> <p>Podman and Systemd play along nicely. Systemd services can be generated directly from Podman. These service files can be used to start the container on boot, restart it on failure, create dependencies between containers, or other facilities Systemd offers.</p> <h3>CoreDNS Container</h3> <p>configuration:</p> <pre class=hljs><code><span class=hljs-meta>$</span><span class=bash> cat Corefile</span>
.:53 {
  cache 10
  forward . 8.8.8.8 9.9.9.9
  log
  errors
}

ldelossa.net {
  cache 10
  hosts /etc/coredns/hosts {
  }
}
<span class=hljs-meta>$</span><span class=bash> cat hosts</span>
192.168.185.10 traefik.ldelossa.net
192.168.185.10 ct-host.ldelossa.net
192.168.185.10 prom.ldelossa.net
</code></pre> <p>CoreDNS with the host plugin uses two configuration files: "Corefile" and "hosts" file.</p> <p>The "Corefile" configures Coredns to forward requests not destined for <code>ldelossa.net</code> to Google's DNS and cache the results for a bit. Any requests for <code>ldelossa.net</code> are forwarded to the "hosts" plugin, using the file <code>/etc/coredns/hosts</code>.</p> <p>The "hosts" defines hostname mappings. For each entry in this file Coredns will return an A record mapping the hostname to the IP address.</p> <pre class=hljs><code><span class=hljs-meta>$</span><span class=bash> podman create --network ct-host --name coredns -dt -p 192.168.185.10:53:53/tcp -p 192.168.185.10:53:53/udp -v /etc/containers/etc.d/coredns:/etc/coredns coredns/coredns -conf /etc/coredns/Corefile</span>
</code></pre> <p>Above shows the podman command used to create the container.</p> <p>A few things to note</p> <ul> <li>Port 53(udp/tcp) is exposed to other devices on LAN via port-forwarding</li> <li>Configuration files are mapped from <code>/etc/containers/etc.d/coredns</code> to <code>/etc/coredns</code> inside the container.</li> <li>Editing the "hosts" file on "ct-host" will reload Coredns without having to restart the container.</li> </ul> <pre class=hljs><code><span class=hljs-meta>$</span><span class=bash> podman generate systemd --name coredns > /etc/systemd/system/coredns-container.service</span>
<span class=hljs-meta>$</span><span class=bash> systemctl daemon-reload</span>
<span class=hljs-meta>$</span><span class=bash> systemctl <span class=hljs-built_in>enable</span> coredns-container</span>
<span class=hljs-meta>$</span><span class=bash> systemctl start coredns-container</span>
</code></pre> <p>A SystemD service can be generated and enabled with the commands above.</p> <h3>Configuring Devices</h3> <p>A typical approach to configuring devices to utilize a custom DNS server would be DHCP. Unfortunately my router does not allow the configuration of DHCP (poo-poo to you ampliFi). However, devices can "opt-in" by setting their DNS server to <code>192.168.185.10:53</code>.</p> <p>As new services come onto the network simply editing <code>/etc/containers/etc.d/coredns/hosts</code> on "ct-host" will provide immediate resolution for devices configured with this DNS.</p> <h2>Conclusion</h2> <p>Home labs are a great way to learn new technologies. By utilizing Podman and CoreDNS a solution for name resolution was devised. Mapping configuration files from the host into containers provides a fast and dynamic way to update DNS in the lab.</p> <p>In <a href=/blog/home-network-pt2>Part 2</a> a mechanism for routing hostnames to specific containerized services is introduced.</p> </article></div></div></div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{article:{date:"2020-06-14",title:"Building A Home Lab With Podman - Pt1",desc:"Learn how Podman can be used to create a home lab newtork and name resolution.",file:"home-network-pt1",html:"\u003Ch1\u003EBuilding A Home Lab With Podman - Pt1\u003C\u002Fh1\u003E\n\u003Cp\u003E\u003Cem\u003ECheckout \u003Ca href=\"\u002Fblog\u002Fhome-network-pt2\"\u003EPart 2\u003C\u002Fa\u003E For Application Routing\u003C\u002Fem\u003E\u003C\u002Fp\u003E\n\u003Cp\u003EIt's common to set up a network, a few virtual hosts, and fundamental network services at home as a way to learn how these technologies interact.\u003C\u002Fp\u003E\n\u003Cp\u003EWhile moving apartments in Brooklyn I discovered a Thinkpad laptop just collecting dust.\nThe laptop had good specs and a 1TB ssd.\nI wanted to put this bad boy to use.\u003C\u002Fp\u003E\n\u003Cp\u003ESoon the idea of creating a modern lab based on containers, free of noisy and expensive equipment, took hold.\u003C\u002Fp\u003E\n\u003Cp\u003EThis post introduces network topology, components which make up the network, and how name resolution is achieved.\u003C\u002Fp\u003E\n\u003Ch2\u003EThe Stack\u003C\u002Fh2\u003E\n\u003Cul\u003E\n\u003Cli\u003EPodman - a daemonless container runtime that works well with SystemD\u003C\u002Fli\u003E\n\u003Cli\u003ECoreDNS - a DNS server that uses a ton of plugins to implement name resolution.\u003C\u002Fli\u003E\n\u003Cli\u003ENetData - a C monitoring daemon which scrapes \u002Fproc for every metric you can think of.\u003C\u002Fli\u003E\n\u003Cli\u003ETraefik - a service routing solution which supports path routing, redirects, and load balancing.\u003C\u002Fli\u003E\n\u003Cli\u003EFedora32 - good ol' fedora linux as a host operating system (shameless plug).\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003EAbove is the software stack used in the lab.\u003C\u002Fp\u003E\n\u003Ch2\u003EThe Network\u003C\u002Fh2\u003E\n\u003Cp\u003EA typical home network consists of a modem, a router with a built in switch and WiFi, and devices which connect to a local LAN.\nThis lab will introduce an additional host for creating and exposing containers.\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003E+----------+  +--------+\n|  Laptop  |  | Iphone |\n+-----+----+  +---+----+\n      |           |\n      |           |\n      |           |\n      |           |\n+-----+-----------+----+                    +------------------------------+\n|                      |                    |                              |\n| LAN 192.168.185.0\u002F24 |                    |  CONTAINER-LAN 10.89.0.0\u002F24  |\n|                      |                    |                              |\n+---------+------------+                    +-------+----------------------+\n          |                                         |\n          |                                         |\n          | port forward +-----------+              |\n          +--------------+ CONTAINER +--------------+\n          |              +-----^-----+              |\n          |                    | podman run         |\n          |              +-----+-----+              |\n          |              |           |              |\n          +--------------+  CT-HOST  +--------------+\n                         |           |\n                         +-----------+\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EThe network will look like this.\u003C\u002Fp\u003E\n\u003Cp\u003ECT-HOST is a Fedora32 laptop running Podman and will manage container lifecycles.\nThe host resides on two networks: LAN (192.168.185.0\u002F24) where devices communicate and CONTAINER-LAN (10.89.0.0\u002F24) where containers communicate.\nThe CONTAINER-LAN is virtual and created by the linux kernel.\u003C\u002Fp\u003E\n\u003Cp\u003EContainers may be exposed on &quot;ct-host&quot; to devices on LAN by port-forwarding the container's port onto the hosts.\nNot every container needs to have their ports forwarded but to achieve name resolution this is required.\u003C\u002Fp\u003E\n\u003Ch2\u003EName Resolution\u003C\u002Fh2\u003E\n\u003Cp\u003EName resolution provides mapping from a hostname to a service.\nThis is encountered every time &quot;www.google.com&quot; is typed into a browser.\nThe name &quot;www.google.com&quot; is resolved to an IP address where web servers provide this service.\nThis lab creates the \u003Ccode\u003Eldelossa.net\u003C\u002Fcode\u003E local domain.\u003C\u002Fp\u003E\n\u003Cp\u003EPersonally, I don't want to write RFC 1035 zone files, host ancient bind servers, or deal with cryptic configs.\nThere is a certain beauty in the syntax of a hosts file.\nA simple text file which maps a hostname to an IP address suits my needs well.\nThe answer was found in \u003Ca href=\"https:\u002F\u002Fcoredns.io\u002F\"\u003ECoreDNS\u003C\u002Fa\u003E and its \u003Ca href=\"https:\u002F\u002Fcoredns.io\u002Fplugins\u002Fhosts\u002F\"\u003Ehosts\u003C\u002Fa\u003E plugin.\u003C\u002Fp\u003E\n\u003Cp\u003EOn top of a terse syntax the &quot;hosts&quot; plugin provides dynamic reloading.\nChanges to the file holding your hostname mappings will reload the server, the changes taking effect soon after.\u003C\u002Fp\u003E\n\u003Ch3\u003EPodman\u003C\u002Fh3\u003E\n\u003Cp\u003EPodman is the container runtime used in this lab.\u003C\u002Fp\u003E\n\u003Cp\u003EPodman and Systemd play along nicely.\nSystemd services can be generated directly from Podman.\nThese service files can be used to start the container on boot, restart it on failure, create dependencies between containers, or other facilities Systemd offers.\u003C\u002Fp\u003E\n\u003Ch3\u003ECoreDNS Container\u003C\u002Fh3\u003E\n\u003Cp\u003Econfiguration:\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E cat Corefile\u003C\u002Fspan\u003E\n.:53 {\n  cache 10\n  forward . 8.8.8.8 9.9.9.9\n  log\n  errors\n}\n\nldelossa.net {\n  cache 10\n  hosts \u002Fetc\u002Fcoredns\u002Fhosts {\n  }\n}\n\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E cat hosts\u003C\u002Fspan\u003E\n192.168.185.10 traefik.ldelossa.net\n192.168.185.10 ct-host.ldelossa.net\n192.168.185.10 prom.ldelossa.net\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003ECoreDNS with the host plugin uses two configuration files: &quot;Corefile&quot; and &quot;hosts&quot; file.\u003C\u002Fp\u003E\n\u003Cp\u003EThe &quot;Corefile&quot; configures Coredns to forward requests not destined for \u003Ccode\u003Eldelossa.net\u003C\u002Fcode\u003E to Google's DNS and cache the results for a bit.\nAny requests for \u003Ccode\u003Eldelossa.net\u003C\u002Fcode\u003E are forwarded to the &quot;hosts&quot; plugin, using the file \u003Ccode\u003E\u002Fetc\u002Fcoredns\u002Fhosts\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EThe &quot;hosts&quot; defines hostname mappings.\nFor each entry in this file Coredns will return an A record mapping the hostname to the IP address.\u003C\u002Fp\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E podman create --network ct-host --name coredns -dt -p 192.168.185.10:53:53\u002Ftcp -p 192.168.185.10:53:53\u002Fudp -v \u002Fetc\u002Fcontainers\u002Fetc.d\u002Fcoredns:\u002Fetc\u002Fcoredns coredns\u002Fcoredns -conf \u002Fetc\u002Fcoredns\u002FCorefile\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EAbove shows the podman command used to create the container.\u003C\u002Fp\u003E\n\u003Cp\u003EA few things to note\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EPort 53(udp\u002Ftcp) is exposed to other devices on LAN via port-forwarding\u003C\u002Fli\u003E\n\u003Cli\u003EConfiguration files are mapped from \u003Ccode\u003E\u002Fetc\u002Fcontainers\u002Fetc.d\u002Fcoredns\u003C\u002Fcode\u003E to \u003Ccode\u003E\u002Fetc\u002Fcoredns\u003C\u002Fcode\u003E inside the container.\u003C\u002Fli\u003E\n\u003Cli\u003EEditing the &quot;hosts&quot; file on &quot;ct-host&quot; will reload Coredns without having to restart the container.\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cpre class=\"hljs\"\u003E\u003Ccode\u003E\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E podman generate systemd --name coredns &gt; \u002Fetc\u002Fsystemd\u002Fsystem\u002Fcoredns-container.service\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E systemctl daemon-reload\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E systemctl \u003Cspan class=\"hljs-built_in\"\u003Eenable\u003C\u002Fspan\u003E coredns-container\u003C\u002Fspan\u003E\n\u003Cspan class=\"hljs-meta\"\u003E$\u003C\u002Fspan\u003E\u003Cspan class=\"bash\"\u003E systemctl start coredns-container\u003C\u002Fspan\u003E\n\u003C\u002Fcode\u003E\u003C\u002Fpre\u003E\n\u003Cp\u003EA SystemD service can be generated and enabled with the commands above.\u003C\u002Fp\u003E\n\u003Ch3\u003EConfiguring Devices\u003C\u002Fh3\u003E\n\u003Cp\u003EA typical approach to configuring devices to utilize a custom DNS server would be DHCP.\nUnfortunately my router does not allow the configuration of DHCP (poo-poo to you ampliFi).\nHowever, devices can &quot;opt-in&quot; by setting their DNS server to \u003Ccode\u003E192.168.185.10:53\u003C\u002Fcode\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EAs new services come onto the network simply editing \u003Ccode\u003E\u002Fetc\u002Fcontainers\u002Fetc.d\u002Fcoredns\u002Fhosts\u003C\u002Fcode\u003E on &quot;ct-host&quot; will provide immediate resolution for devices configured with this DNS.\u003C\u002Fp\u003E\n\u003Ch2\u003EConclusion\u003C\u002Fh2\u003E\n\u003Cp\u003EHome labs are a great way to learn new technologies.\nBy utilizing Podman and CoreDNS a solution for name resolution was devised.\nMapping configuration files from the host into containers provides a fast and dynamic way to update DNS in the lab.\u003C\u002Fp\u003E\n\u003Cp\u003EIn \u003Ca href=\"\u002Fblog\u002Fhome-network-pt2\"\u003EPart 2\u003C\u002Fa\u003E a mechanism for routing hostnames to specific containerized services is introduced.\u003C\u002Fp\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');</script><script src=/client/21d5f7fc0374dd879b15/main.js></script> 