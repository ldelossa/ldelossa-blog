<!doctype html> <html lang=en> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <meta content=#333333 name=theme-color> <base href=/ > <link href=global.css rel=stylesheet> <link href=manifest.json rel=manifest crossorigin=use-credentials> <link href=favicon.png rel=icon type=image/png> <link href=https://meyerweb.com/eric/tools/css/reset/reset.css rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=Baloo+Paaji+2:wght@500&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=Source+Code+Pro&display=swap" rel=stylesheet> <link href="https://fonts.googleapis.com/css2?family=Muli&display=swap" rel=stylesheet> <link href=github-markdown.css rel=stylesheet> <link href=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/zenburn.min.css rel=stylesheet> <script src=//cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js></script> <script src=//gc.zgo.at/count.js async data-goatcounter=https://ldelossa.goatcounter.com/count></script> <style>.layout.svelte-lybuj1{display:grid;height:100vh;width:100vw;grid-template-columns:1.5fr 6fr}.content-wrapper.svelte-lybuj1{grid-area:1/2/2/3;overflow-y:auto}.content-wrapper-full.svelte-lybuj1{grid-area:1/1/2/3}@media screen and (max-width:600px){.layout.svelte-lybuj1{display:grid;grid-template-columns:1fr}.content-wrapper.svelte-lybuj1{z-index:1}.content-wrapper-full.svelte-lybuj1{z-index:1}}.sidebar-open.svelte-posnvr{display:flex;justify-content:space-between;flex-direction:column;height:100vh;max-width:300px;min-width:275px;margin-right:1vmin;background:#4b6777;overflow-y:hidden}.sidebar-closed.svelte-posnvr{display:none}.sb-toggle-button-open.svelte-posnvr{z-index:100;outline:0;background-color:Transparent;border:none;padding:10px 12px;font-size:30px;cursor:pointer;color:#f3f8f2;font-family:Muli,cursive;position:fixed;left:0}.sb-toggle-button-open.svelte-posnvr:hover{color:#f2511b}.sb-toggle-button-closed.svelte-posnvr{z-index:100;outline:0;background-color:Transparent;border:none;padding:10px 12px;font-size:30px;cursor:pointer;color:#4b6777;font-family:Muli,cursive;position:fixed;left:0}.sb-toggle-button-closed.svelte-posnvr:hover{color:#f2511b}.author-wrapper.svelte-posnvr{display:flex;flex-direction:column;justify-content:center;margin:40px}.author.svelte-posnvr{text-align:center;font-size:2rem;color:#f3f8f2;font-family:Muli,sans-serif;letter-spacing:1px;text-shadow:2px 2px 0 rgba(0,0,0,.35),2px 2px 5px rgba(0,0,0,.5)}.console-wrapper.svelte-posnvr{display:flex;margin:20px;justify-content:center}nav.svelte-posnvr{display:flex;flex-direction:column;justify-content:space-around;flex-wrap:wrap}.icons-wrapper.svelte-posnvr{display:flex;flex-direction:column;justify-content:flex-end;padding:20px}@media screen and (max-width:600px){.sidebar-open.svelte-posnvr{-moz-box-shadow:initial;-webkit-box-shadow:initial;box-shadow:initial;max-width:initial;min-width:initial;margin-right:initial;border-right:initial;height:100vh;width:100vw}.icons-wrapper.svelte-posnvr{display:flex;grid-area:icons;flex-direction:column;justify-content:space-between}}pre.svelte-wc9ma6 code.svelte-wc9ma6{border-radius:3%;padding:8px;display:block;min-width:230px;max-width:275px;background:#333;color:#737373}.button-wrapper.svelte-n868dk{text-align:center;margin:1rem 0 1rem 0;padding:1rem 1rem 1rem 1rem}.button-ref.svelte-n868dk{text-decoration:underline;font-size:30px;color:#e9f1f7;font-family:Muli,sans-serif;letter-spacing:1px;text-shadow:2px 2px 0 rgba(0,0,0,.35),2px 2px 5px rgba(0,0,0,.5)}.button-ref.svelte-n868dk:hover{color:#f2511b;text-shadow:-1px -1px 0 rgba(242,81,27,.5),-1px -1px -5px rgba(242,81,27,.5)}.icons.svelte-13lfieo{display:flex;flex-direction:row;justify-content:space-around;flex-wrap:wrap}img.svelte-13lfieo{width:30px;height:30px}img.svelte-13lfieo:hover{-webkit-filter:drop-shadow(2px 2px 2px #222);filter:drop-shadow(2px 2px 2px #222)}.blog-wrapper.svelte-1ih628r{max-height:100vh;max-width:100vw}.markdown-body.svelte-1ih628r{min-width:100px;max-width:900px;margin:0 auto;padding:45px;color:#e9f1f7;font-family:Muli,sans-serif}@media(max-width:767px){.markdown-body.svelte-1ih628r{max-width:75%}}</style> <noscript id=sapper-head-start></noscript><title>LFD-420 Review</title><noscript id=sapper-head-end></noscript> <link href=/client/21d5f7fc0374dd879b15/main.js rel=preload as=script><link href=/client/21d5f7fc0374dd879b15/blog_$slug.2.js rel=preload as=script></head> <body> <div id=sapper> <div class="svelte-lybuj1 layout"><button class="svelte-posnvr sb-toggle-button-closed">☰</button> <div class="svelte-posnvr sidebar-closed"><div class="svelte-posnvr author-wrapper"><p class="svelte-posnvr author">Louis DeLosSantos<p><div class="svelte-posnvr console-wrapper"><pre class=svelte-wc9ma6><code class=svelte-wc9ma6>❯ tree ./ldelossa 
├── hardware
├── linux
├── music
└── software
❯ <span id=cursor>▊</span></code></pre></div></div> <nav class=svelte-posnvr><div class="svelte-n868dk button-wrapper"><a href=about class="svelte-n868dk button-ref">about</a></div> <div class="svelte-n868dk button-wrapper"><a href=resume class="svelte-n868dk button-ref">resume</a></div> <div class="svelte-n868dk button-wrapper"><a href=projects class="svelte-n868dk button-ref">projects</a></div> <div class="svelte-n868dk button-wrapper"><a href=blog class="svelte-n868dk button-ref">blog</a></div></nav> <div class="svelte-posnvr icons-wrapper"><div class="svelte-13lfieo icons"><a href=https://www.linkedin.com/in/louisdelossantos/ target=_blank><img alt="linkedin icon" class=svelte-13lfieo src=linkedin.svg></a> <a href=https://github.com/ldelossa target=_blank><img alt="github icon" class=svelte-13lfieo src=github.svg></a> <a href=https://twitter.com/ldelossa_ld target=_blank><img alt="twitter icon" class=svelte-13lfieo src=twitter.svg></a></div></div></div> <div class="svelte-lybuj1 content-wrapper-full"> <div class="svelte-1ih628r blog-wrapper"><article class="svelte-1ih628r markdown-body"><h1>Linux Foundation's LFD420 Review</h1> <p>The low level details of operating systems are fascinating but often hard to acquire. Books on the topic usually cover only user space systems programming leaving out kernel native development all together. When material is discovered on the topic it's often out of date as the kernel moves quickly in development.</p> <p>Seeking a deeper understanding I asked my current employer Red Hat if they would assist. Generously they agreed to enroll me in the Linux Foundation's Linux Kernel Internals and Development (LFD420) course.</p> <p>I want to provide the community with an honest review of this course so others can determine if it's right for them.</p> <h2>My Background</h2> <p>Before jumping into the course details I'd like to share my background.</p> <p>At the start of my career I worked in performance, systems, and network engineering. In these positions I wrote little code but I worked on low level system details. It was not rare for my teams to be tuning kernel parameters, adjusting virtual host numa localities, squeezing performance out of routing infrastructure, and so on.</p> <p>Over the years my interest has evolved further into software development but the affinity for systems has not lessened. As of today I am a full time software engineer.</p> <p>I do not write production C code but know enough to get by.</p> <h2>The Course</h2> <p>The course is closed source and proprietary. For this reason I will provide overviews and not specifics. The course outline can be seen here: https://training.linuxfoundation.org/training/linux-kernel-internals-and-development/</p> <h2>Attendance</h2> <p>Attendance is via teleconference. A physical copy of the course material is mailed to you before the course begins. This material is identical to the slides the instructor will use during the course. Zoom was used, which I am not a fan of, but luckily the browser functionalities worked fine and a desktop client was not required.</p> <h2>Workstation Setup</h2> <p>It is your choice whether you'd like to use a VM the foundation provides, your own native machine, a cloud machine, or a VM you provide on your own. There is no requirement on the distribution used. A script is provided to you to ensure the correct packages are installed on your machine to complete the course. Oddly, the package list it installed was pretty large and I'm confident most of it is unnecessary.</p> <p>I started the course on a bare metal laptop running Fedora 32. While working through labs I found my kernel becoming tainted (from loading out of tree modules), permanent run-time leaks from forgetting k-free, and crashing kernel modules quite regularly.</p> <p>After the first day I decided a VM is definitely the way to go for this course. I suggest anyone enrolled in the course to work on a virtual machine and one you do not mind throwing away at the end of the course. I'll go over my VM setup a little later in this post.</p> <h2>Structure</h2> <p>Each day covers about 3-5 chapters. The instructor will walk you through the material in each chapter. My instructor was very receptive to questions, which I made sure to ask a ton. It was not unordinary for me to ask a question, not quite understand the answer, and begin a whiteboard session to clarify.</p> <p>When reaching the end of chapter labs are presented. It is your choice whether to attempt the labs without guidance, look at the examples just for reference, or simply compile the examples and review the written code to understand how it works.</p> <p>I typically found myself starting a lab with no reference but opening the reference code to see which libraries should be included. The labs, in my opinion, were well thought out and focused on the chapter's concepts. Each lab allowed you to go about them in your own way, deciding whether to compile-time or run-time allocate dependencies, use a mutex or a spin lock, etc... I did not feel rushed during the labs and we generally had enough time to complete each one.</p> <p>I did have difficulty finding which libraries macros and functions were defined in when referenced in examples. We were introduced to several kernel cross referencing tools in later chapters which made this easier in the long run.</p> <h2>Material</h2> <p>I won't go too specific into the material of the course for reasons mentioned earlier.</p> <p>What can be said however is the material is up-to-date and is a rare corpus of real world examples of native kernel development. Techniques for writing syscalls without having to re-compile the kernel each time were examples of modern and practical knowledge presented to you.</p> <p>You will write kernel modules, compile your own kernel, work closely with critical data structures in the kernel, understand low level cpu details such as disabling and enable interupts, and write memory allocation procedures all from kernel space.</p> <h2>Worth It?</h2> <p>For me, the course was completely worth it for one reason alone, the ability to <em>ask questions</em>. I've read a lot of material on the kernel, hacked up a lot of toy syscalls and kernel modules, but there is no equivalent to simply being able to present a question to an expert and having it clarified. Often we simply have the wrong mental model about a topic or concept and a whiteboard explanation is invaluable.</p> <p>That being said, it becomes apparent that this course is <em>only</em> worth it if you <em>have</em> questions to ask. For this reason the course being labeled as “intermediate” is correct in my opinion.</p> <p>If you have not dabbled in at least a few of the topics in the course material, stirring up your own questions, you may feel this course is just a regurgitation of the written material. In order to get the most of this class you must know what you want from it, formulate questions ahead of time, don't be shy, and ask your instructor to whiteboard.</p> <p>My prior work in systems along with my current work software left me with a wealth of unresolved conceptions on the topic. I can honestly say a lot of these questions were resolved by this course.</p> <h2>Tips</h2> <p>A few tips for the course if you decide to enroll.</p> <p>Use a VM. You will be potentially crashing your machine, tainting the kernel, causing leaks and deadlocks in kernel space. You probably don't want to do this all on your work or personal laptop.</p> <p>Download and compile the linux mainline kernel before the course begins. If you know how to compile a kernel already, do so and use ccache initially. Ccache will cache your object files making rebuilds much quicker allowing for more time for labs. I used these instructions: http://nickdesaulniers.github.io/blog/2018/06/02/speeding-up-linux-kernel-builds-with-ccache/</p> <p>Personally, I used sshfs to mount my VM's filesystem into my host's. This allowed me to use my Vim setup which has ctags, fzf searching, man lookup, etc... on my host machine while editing code on the VM. I would have two terminal windows open, one on my host editing code, and another with a ssh session in the VM. The ssh session in the VM is where I would compile the code. SSHFS is probably available in your distro's package manager and even available for MacOS as a FUSE.</p> </article></div></div></div></div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,{article:{date:"2020-06-25",title:"LFD-420 Review",desc:"My review of the Linux Foundation's course Linux Kernel Internals and Development (LFD420)",file:"lfd420-review",html:"\u003Ch1\u003ELinux Foundation's LFD420 Review\u003C\u002Fh1\u003E\n\u003Cp\u003EThe low level details of operating systems are fascinating but often hard to acquire.\nBooks on the topic usually cover only user space systems programming leaving out kernel native development all together.\nWhen material is discovered on the topic it's often out of date as the kernel moves quickly in development.\u003C\u002Fp\u003E\n\u003Cp\u003ESeeking a deeper understanding I asked my current employer Red Hat if they would assist.\nGenerously they agreed to enroll me in the Linux Foundation's Linux Kernel Internals and Development (LFD420) course.\u003C\u002Fp\u003E\n\u003Cp\u003EI want to provide the community with an honest review of this course so others can determine if it's right for them.\u003C\u002Fp\u003E\n\u003Ch2\u003EMy Background\u003C\u002Fh2\u003E\n\u003Cp\u003EBefore jumping into the course details I'd like to share my background.\u003C\u002Fp\u003E\n\u003Cp\u003EAt the start of my career I worked in performance, systems, and network engineering.\nIn these positions I wrote little code but I worked on low level system details.\nIt was not rare for my teams to be tuning kernel parameters, adjusting virtual host numa localities, squeezing performance out of routing infrastructure, and so on.\u003C\u002Fp\u003E\n\u003Cp\u003EOver the years my interest has evolved further into software development but the affinity for systems has not lessened.\nAs of today I am a full time software engineer.\u003C\u002Fp\u003E\n\u003Cp\u003EI do not write production C code but know enough to get by.\u003C\u002Fp\u003E\n\u003Ch2\u003EThe Course\u003C\u002Fh2\u003E\n\u003Cp\u003EThe course is closed source and proprietary.\nFor this reason I will provide overviews and not specifics.\nThe course outline can be seen here:\nhttps:\u002F\u002Ftraining.linuxfoundation.org\u002Ftraining\u002Flinux-kernel-internals-and-development\u002F\u003C\u002Fp\u003E\n\u003Ch2\u003EAttendance\u003C\u002Fh2\u003E\n\u003Cp\u003EAttendance is via teleconference.\nA physical copy of the course material is mailed to you before the course begins.\nThis material is identical to the slides the instructor will use during the course.\nZoom was used, which I am not a fan of, but luckily the browser functionalities worked fine and a desktop client was not required.\u003C\u002Fp\u003E\n\u003Ch2\u003EWorkstation Setup\u003C\u002Fh2\u003E\n\u003Cp\u003EIt is your choice whether you'd like to use a VM the foundation provides, your own native machine, a cloud machine, or a VM you provide on your own.\nThere is no requirement on the distribution used.\nA script is provided to you to ensure the correct packages are installed on your machine to complete the course.\nOddly, the package list it installed was pretty large and I'm confident most of it is unnecessary.\u003C\u002Fp\u003E\n\u003Cp\u003EI started the course on a bare metal laptop running Fedora 32.\nWhile working through labs I found my kernel becoming tainted (from loading out of tree modules), permanent run-time leaks from forgetting k-free, and crashing kernel modules quite regularly.\u003C\u002Fp\u003E\n\u003Cp\u003EAfter the first day I decided a VM is definitely the way to go for this course.\nI suggest anyone enrolled in the course to work on a virtual machine and one you do not mind throwing away at the end of the course.\nI'll go over my VM setup a little later in this post.\u003C\u002Fp\u003E\n\u003Ch2\u003EStructure\u003C\u002Fh2\u003E\n\u003Cp\u003EEach day covers about 3-5 chapters.\nThe instructor will walk you through the material in each chapter.\nMy instructor was very receptive to questions, which I made sure to ask a ton.\nIt was not unordinary for me to ask a question, not quite understand the answer, and begin a whiteboard session to clarify.\u003C\u002Fp\u003E\n\u003Cp\u003EWhen reaching the end of chapter labs are presented.\nIt is your choice whether to attempt the labs without guidance, look at the examples just for reference, or simply compile the examples and review the written code to understand how it works.\u003C\u002Fp\u003E\n\u003Cp\u003EI typically found myself starting a lab with no reference but opening the reference code to see which libraries should be included.\nThe labs, in my opinion, were well thought out and focused on the chapter's concepts.\nEach lab allowed you to go about them in your own way, deciding whether to compile-time or run-time allocate dependencies, use a mutex or a spin lock, etc...\nI did not feel rushed during the labs and we generally had enough time to complete each one.\u003C\u002Fp\u003E\n\u003Cp\u003EI did have difficulty finding which libraries macros and functions were defined in when referenced in examples.\nWe were introduced to several kernel cross referencing tools in later chapters which made this easier in the long run.\u003C\u002Fp\u003E\n\u003Ch2\u003EMaterial\u003C\u002Fh2\u003E\n\u003Cp\u003EI won't go too specific into the material of the course for reasons mentioned earlier.\u003C\u002Fp\u003E\n\u003Cp\u003EWhat can be said however is the material is up-to-date and is a rare corpus of real world examples of native kernel development.\nTechniques for writing syscalls without having to re-compile the kernel each time were examples of modern and practical knowledge presented to you.\u003C\u002Fp\u003E\n\u003Cp\u003EYou will write kernel modules, compile your own kernel, work closely with critical data structures in the kernel, understand low level cpu details such as disabling and enable interupts, and write memory allocation procedures all from kernel space.\u003C\u002Fp\u003E\n\u003Ch2\u003EWorth It?\u003C\u002Fh2\u003E\n\u003Cp\u003EFor me, the course was completely worth it for one reason alone, the ability to \u003Cem\u003Eask questions\u003C\u002Fem\u003E.\nI've read a lot of material on the kernel, hacked up a lot of toy syscalls and kernel modules, but there is no equivalent to simply being able to present a question to an expert and having it clarified.\nOften we simply have the wrong mental model about a topic or concept and a whiteboard explanation is invaluable.\u003C\u002Fp\u003E\n\u003Cp\u003EThat being said, it becomes apparent that this course is \u003Cem\u003Eonly\u003C\u002Fem\u003E worth it if you \u003Cem\u003Ehave\u003C\u002Fem\u003E questions to ask.\nFor this reason the course being labeled as “intermediate” is correct in my opinion.\u003C\u002Fp\u003E\n\u003Cp\u003EIf you have not dabbled in at least a few of the topics in the course material, stirring up your own questions, you may feel this course is just a regurgitation of the written material.\nIn order to get the most of this class you must know what you want from it, formulate questions ahead of time, don't be shy, and ask your instructor to whiteboard.\u003C\u002Fp\u003E\n\u003Cp\u003EMy prior work in systems along with my current work software left me with a wealth of unresolved conceptions on the topic.\nI can honestly say a lot of these questions were resolved by this course.\u003C\u002Fp\u003E\n\u003Ch2\u003ETips\u003C\u002Fh2\u003E\n\u003Cp\u003EA few tips for the course if you decide to enroll.\u003C\u002Fp\u003E\n\u003Cp\u003EUse a VM.\nYou will be potentially crashing your machine, tainting the kernel, causing leaks and deadlocks in kernel space.\nYou probably don't want to do this all on your work or personal laptop.\u003C\u002Fp\u003E\n\u003Cp\u003EDownload and compile the linux mainline kernel before the course begins.\nIf you know how to compile a kernel already, do so and use ccache initially.\nCcache will cache your object files making rebuilds much quicker allowing for more time for labs.\nI used these instructions: http:\u002F\u002Fnickdesaulniers.github.io\u002Fblog\u002F2018\u002F06\u002F02\u002Fspeeding-up-linux-kernel-builds-with-ccache\u002F\u003C\u002Fp\u003E\n\u003Cp\u003EPersonally, I used sshfs to mount my VM's filesystem into my host's.\nThis allowed me to use my Vim setup which has ctags, fzf searching, man lookup, etc... on my host machine while editing code on the VM.\nI would have two terminal windows open, one on my host editing code, and another with a ssh session in the VM.\nThe ssh session in the VM is where I would compile the code.\nSSHFS is probably available in your distro's package manager and even available for MacOS as a FUSE.\u003C\u002Fp\u003E\n"}}]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');</script><script src=/client/21d5f7fc0374dd879b15/main.js></script> 